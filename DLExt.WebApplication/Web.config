<?xml version="1.0"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
  </configSections>
  <appSettings>
    
  </appSettings>
  <system.web>
    <httpRuntime requestValidationMode="2.0"/>
    <compilation debug="true" batch="false" targetFramework="4.0">
  </compilation>
    <authentication mode="Windows" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="DLExt.ApplicationDirectoryService.AppDirectoryService" behaviorConfiguration="AppDirectoryServiceBehavior">
        <endpoint address="" binding="webHttpBinding" contract="DLExt.ApplicationDirectoryService.IAppDirectoryService" bindingConfiguration="AppDirectoryEndpointBinding" behaviorConfiguration="AppDirectoryEndpointBehavior">
          <!--<identity>
            <dns value="dlext.ru" />
          </identity>-->
        </endpoint>
        <endpoint address="mex" binding="webHttpBinding" contract="IMetadataExchange" bindingConfiguration="AppDirectoryEndpointBinding">
          <!--<identity>
            <dns value="dlext.ru"/>
          </identity>-->
        </endpoint>
      </service>
    </services>
    <behaviors>
      <endpointBehaviors>
        <behavior name="AppDirectoryEndpointBehavior">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="AppDirectoryServiceBehavior">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <bindings>
      <webHttpBinding>
        <binding name="AppDirectoryEndpointBinding">
          <!--<security mode="None"/>-->
          <security mode="TransportCredentialOnly">
            <transport clientCredentialType="Windows" proxyCredentialType="Windows" />
          </security>
        </binding>
      </webHttpBinding>
    </bindings>
    <diagnostics>
      <messageLogging logEntireMessage="true" logMalformedMessages="true" logMessagesAtServiceLevel="true" logMessagesAtTransportLevel="true" maxMessagesToLog="3000" maxSizeOfMessageToLog="2000"/>
    </diagnostics>
  </system.serviceModel>
  <system.diagnostics>
    <sources>
      <source name="System.ServiceModel" switchValue="Information, ActivityTracing" propagateActivity="true">
        <listeners>
          <add name="traceListener" type="System.Diagnostics.XmlWriterTraceListener" initializeData="c:\Users\nanikin\Documents\Visual Studio 2010\Projects\DLExt\DLExt\DLExt.WebApplication\App_Data\trace.svclog"/>
        </listeners>
      </source>
    </sources>
    <trace autoflush="true"/>
  </system.diagnostics>
  <log4net>
    <appender name="ConsoleAppender" type="log4net.Appender.ConsoleAppender" >
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date [%thread] %-5level %logger [%ndc] - %message%newline" />
      </layout>
    </appender>
    <appender name="RollingFileAppender" type="log4net.Appender.RollingFileAppender">
      <file value="Logs\example.log" />
      <appendToFile value="true" />
      <maximumFileSize value="100KB" />
      <maxSizeRollBackups value="2" />
      <immediateFlush value="true"/>
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date [%thread] %-5level %logger - %message%newline" />
      </layout>
    </appender>
    <appender name="EventLogAppender" type="log4net.Appender.EventLogAppender" >
      <applicationName value="Test" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date [%thread] %-5level %logger - %message%newline" />
      </layout>
    </appender>
    <root>
      <level value="ALL" />
      <appender-ref ref="RollingFileAppender" />
    </root>
   
  </log4net>
</configuration>