@using LocalizedStrings = Resources.CommonResources;
@{
    ViewBag.Title = LocalizedStrings.HomeTitle;
    
}
<div class="locations-box inline-block">
    <h3>@LocalizedStrings.LocationsHeader</h3>
    <div data-bind="visible : locationsLoading">
        <img class="loader" src="/Content/Images/AreaLoader.gif" alt="loading" />
    </div>
    <div data-bind="visible : locationsLoadingCompleted">
        <ul data-bind="foreach: locations">
            <li class="unmark">
                <input type="checkbox" data-bind="value: $data, checked: $parent.checkedLocations" />
                <span data-bind="text: $data"></span></li>
        </ul>
    </div>
</div>
<div class="persons-box inline-block">
    <h3>@LocalizedStrings.RemoveFromDistribution</h3>
    <div>
        <select class="persons-selection" data-bind="options: filteredPersons, optionsText: 'name', value: personToExclude"
            size="6">
        </select>
    </div>
    <div>
        <input type="button" class="ui-widget ui-button ui-state-default" value="@LocalizedStrings.ExcludeButtonLabel" data-bind="event: {click: excludePerson }" /><br />
        <input type="button" class="ui-widget ui-button ui-state-default" value="@LocalizedStrings.IncludeButtonLabel" data-bind="event: {click: includePerson }, visible: personsExcluded" />
    </div>
    <div data-bind="visible: personsExcluded">
        <select class="persons-selection" data-bind="options: excludedPersons, optionsText: 'name', value: personToInclude"
            size="6">
        </select>
    </div>
</div>
<div class="create-list-container">
    <span>Number of persons in list:</span><span id="persons-count-span" data-bind="text: filteredPersonsCount"></span>
    <input type="button" class="ui-widget ui-button ui-state-default" value="@LocalizedStrings.CreateListButtonLabel"
           data-bind="event: {click: generateList}" /><div class="no-persons-notice" data-bind="visibility: errorNoPersonsSelected">
                                                          <div class="ui-state-error ui-corner-all">
                                                              <span class="ui-icon ui-icon-info"></span>
                                                              <span>@LocalizedStrings.ErrorNobodySelected</span>
                                                          </div>
                                                      </div>
</div>
<div id="dialog" title="@LocalizedStrings.DialogCopyEmailsHeader" data-bind="dialog: isOpen">
    <span id="copyClipboardMessage">@LocalizedStrings.DialogCopyEmailsBody</span>
    <div id="textareaContainer">
        <textarea data-bind="value: dialogWindowAddressList" onfocus="this.select();"></textarea>
    </div>
</div>
<script type="text/javascript">
    $(':button').button().on('hover blur', function () {
        $(this).toggleClass('ui-state-hover');
    });
   
    ko.applyBindings(new ListGeneratorViewModel());
</script>
